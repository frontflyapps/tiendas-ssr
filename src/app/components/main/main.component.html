<mat-sidenav-container *ngIf="appService.businessConfig?.Business?.status !== 'blockPayment'">
  <!-- Vista movil menu -->
  <mat-sidenav #start [opened]="false" class="DrawerMobileView" mode="over">
    <mat-list class="position-relative">
      <mat-list-item>
        <mat-icon> person</mat-icon>
        &nbsp;
        <span class="mat-body-2" style="font-size: 19px"> {{ '¡Hola' | translate }}, </span>
        &nbsp;
        <span *ngIf="loggedInUser" class="mat-body-2" style="font-size: 19px">
          {{ loggedInUser.name }}!
        </span>

        <a *ngIf="!loggedInUser" class="mat-body-2" href="/my-account" style="font-size: 19px">
          {{ 'Inicia Sesión' | translate }}!
        </a>

        <span (click)="start.toggle()" class="sidebar-close-btn">
          <mat-icon>close</mat-icon>
        </span>
      </mat-list-item>
    </mat-list>

    <mat-divider></mat-divider>

    <div class="sidebar-nav-items d-flex flex-column justify-content-start align-items-stretch">
      <app-sidebar
        *ngFor="let item of navItems"
        [item]="item"
        (itemSelected)="start.toggle()"
      ></app-sidebar>
      <!--            <a mat-list-item class="link-nav-a" href="/become-a-seller">-->
      <!--              <mat-icon class="mr-3">card_membership</mat-icon>-->
      <!--              <span class="mat-body-2" style="font-size: 15px">{{ 'Crea tu negocio' | translate }}</span>-->
      <!--            </a>-->
      <div
        (click)="createYourBusiness()"
        class="link-nav-a"
        *ngIf="appService.businessConfig?.showDigitalContract && !this.loggedInUser?.Business"
      >
        <mat-icon class="mr-3">card_membership</mat-icon>
        <span class="mat-body-2" style="font-size: 15px">{{ 'Crea tu negocio' | translate }}</span>
      </div>
    </div>

    <mat-divider *ngFor="let item of [1, 2, 3, 4]"></mat-divider>

    <mat-list>
      <mat-list-item>
        <span class="mat-body-2" style="font-size: 19px">
          {{ 'Configuración' | translate }}
        </span>
      </mat-list-item>
    </mat-list>

    <mat-nav-list>
      <a
        (click)="onShowProfile()"
        *ngIf="loggedInUser"
        mat-list-item
        class="d-flex justify-content-start align-items-center"
      >
        <mat-icon>build</mat-icon>
        <span class="ml-3">{{ 'Profile' | translate }}</span>
      </a>

      <a
        (click)="onShowMyContacts()"
        *ngIf="loggedInUser"
        mat-list-item
        class="d-flex justify-content-start align-items-center"
      >
        <mat-icon>book</mat-icon>
        <span class="ml-3">{{ 'Mis contactos' | translate }}</span>
      </a>

      <a
        (click)="onChangePass()"
        *ngIf="loggedInUser"
        mat-list-item
        class="d-flex justify-content-start align-items-center"
      >
        <mat-icon>no_encryption</mat-icon>
        <span class="ml-3">{{ 'Cambiar contraseña' | translate }}</span>
      </a>

      <!--      <a #langMenuTrigger='matMenuTrigger' [matMenuTriggerFor]='langMenu1' fxLayoutAlign='start center' mat-list-item>-->
      <!--        <img [src]='flag?.image' width='18' />-->
      <!--        <span class='ml-3 mat-body-2'>{{ flag?.name }}</span>-->
      <!--        <mat-icon class='mat-icon-sm caret cur-icon ml-auto'>arrow_drop_down</mat-icon>-->
      <!--      </a>-->

      <!--      <mat-menu #langMenu1='matMenu' [overlapTrigger]='false' class='app-dropdown' xPosition='before'>-->
      <!--        <button (click)='changeLang(flag)' *ngFor='let flag of flags' fxLayoutAlign='start center' mat-menu-item>-->
      <!--          <img [src]='flag?.image' width='18' alt='logo'> <span class='ml-3 mat-body-2'>{{ flag?.name }}</span>-->
      <!--        </button>-->
      <!--      </mat-menu>-->

      <!--<a
        fxLayoutAlign="start center"
        mat-list-item
        [matMenuTriggerFor]="currencyMenu1"
        #currencyMenuTrigger="matMenuTrigger"
      >
        <span *ngIf="currency?.name == 'CUP'" style="font-size: 19px; margin-left: 7px"> &#36; </span>
        <span *ngIf="currency?.name == 'USD'" style="font-size: 19px; margin-left: 7px"> &#36; </span>
        <span class="ml-3 mat-body-2">{{ currency?.name }}</span>
        <mat-icon class="mat-icon-sm caret cur-icon ml-auto">arrow_drop_down</mat-icon>
      </a>-->

      <mat-menu
        #currencyMenu1="matMenu"
        [overlapTrigger]="false"
        class="app-dropdown"
        xPosition="before"
      >
        <button
          (click)="changeCurrency(cur)"
          *ngFor="let cur of currencies"
          mat-menu-item
          class="d-flex justify-content-start align-items-center"
        >
          <span>{{ cur?.name }}</span>
        </button>
      </mat-menu>

      <a
        (click)="onGotoBackend()"
        *ngIf="
          loggedInUser &&
          (loggedInUserService.isAdminOrOwnerUser() || loggedInUserService.isMessengerUser())
        "
        class="link-nav-a"
        mat-list-item
      >
        <mat-icon>edit</mat-icon>
        <span class="ml-3">{{ 'Ir a la administración' | translate }}</span>
      </a>

      <a (click)="onLogout()" *ngIf="loggedInUser" class="link-nav-a" mat-list-item>
        <mat-icon>exit_to_app</mat-icon>
        <span class="ml-3">{{ 'Logout' | translate }}</span>
      </a>
    </mat-nav-list>
  </mat-sidenav>

  <!-- Notifications -->
  <mat-sidenav
    #notificationBar
    [opened]="false"
    class="DrawerNotificationPanel"
    fixedInViewport
    mode="over"
    position="end"
  >
    <mat-list class="position-relative">
      <mat-list-item>
        <mat-icon> notifications</mat-icon>
        &nbsp;
        <span class="mat-body-2" style="font-size: 19px">
          {{ 'Notificaciones' | translate }}
        </span>

        <span (click)="notificationBar.toggle()" class="sidebar-close-btn">
          <mat-icon>close</mat-icon>
        </span>
      </mat-list-item>
    </mat-list>

    <mat-divider></mat-divider>

    <app-panel-notifications (closePanel)="notificationBar.toggle()"></app-panel-notifications>
  </mat-sidenav>

  <!-- Todos excepto vista movil -->
  <div [class.py-2]="!loggedInUser" class="home-header d-sm-none">
    <div class="container-header d-flex justify-content-between align-items-center">
      <img
        alt="logo"
        class="Logo-img d-inline d-sm-none"
        (click)="metaAdd()"
        routerLink="/"
        [src]="logo"
      />
      <button (click)="start.toggle()" mat-icon-button class="d-sm-block-i d-none-i">
        <mat-icon>menu</mat-icon>
      </button>

      <div
        class="search-form d-flex justify-content-start align-items-center transpilerClass-fxFlex-8d5186"
      >
        <div
          class="search-form d-flex justify-content-start align-items-center transpilerClass-fxLayoutGap-d9913a"
        >
          <!-- ======== -->
          <!-- Location -->
          <div
            id="nav-location"
            class="info-location d-flex justify-content-start align-items-center transpilerClass-fxLayoutGap-f0f153 d-block d-sm-none"
            (click)="
              tour?.getCurrentStep()?.isOpen() ? $event.stopPropagation() : openSetLocation()
            "
          >
            <div class="nl-logo">
              <mat-icon>room</mat-icon>
            </div>
            <div *ngIf="business || province" class="nl-titles d-flex flex-column">
              <ng-container *ngIf="business">
                <div class="nl-province">{{ business?.name }}</div>
                <div class="nl-municipality">{{ province?.name }}</div>
              </ng-container>
              <ng-container *ngIf="!business">
                <div class="nl-province">{{ province?.name }}</div>
                <div class="nl-municipality">{{ municipality?.name }}</div>
              </ng-container>
            </div>

            <div *ngIf="!business && !province" class="nl-titles d-flex flex-column">
              <!-- <span></span>
              <span></span>
              <span></span>
              <span></span> -->
              <div class="nl-province">{{ 'Comprar en...' | translate }}</div>
              <div class="nl-municipality">{{ 'Escoger ubicación' | translate }}</div>
            </div>
          </div>

          <!-- ======== -->
          <!-- SEARCHING -->
          <div class="form-wrap transpilerClass-fxFlex-5e004c">
            <input
              (keyup.enter)="onSearch()"
              [formControl]="searchForm"
              placeholder="{{ 'Buscar en la tienda...' | translate }}"
              type="text"
            />
            <button (click)="onSearch()" class="btn-search">
              <mat-icon>search</mat-icon>
            </button>
          </div>
        </div>
      </div>

      <div
        class="userWidgets d-flex justify-content-end align-items-center d-xs-flex d-sm-flex justify-content-xs-start justify-content-sm-start align-items-xs-center align-items-sm-center"
        ngClass.xs="w-100"
      >
        <div class="d-flex justify-content-end align-items-center transpilerClass-fxFlex-ff0b3d">
          <div class="widget-text mx-2">
            <a
              #langMenuTrigger="matMenuTrigger"
              [matMenuTriggerFor]="langMenu"
              mat-button
              matTooltip="{{ 'Change language' | translate }}"
            >
              <img [src]="flag?.image" height="24" width="24" />
              <span class="flag-menu-title d-none d-sm-inline"></span>
              <mat-icon iconPositionEnd class="mat-icon-sm caret cur-icon"
                >arrow_drop_down</mat-icon
              >
            </a>
            <mat-menu
              #langMenu="matMenu"
              [overlapTrigger]="false"
              class="app-dropdown"
              xPosition="before"
            >
              <span>
                <button (click)="changeLang(flag)" *ngFor="let flag of flags" mat-menu-item>
                  <img [src]="flag.image" width="18" /> {{ flag?.name }}
                </button>
              </span>
            </mat-menu>
          </div>
        </div>

        <!--        <a [routerLink]="['/pages/compare']"-->
        <!--           class='px-3'-->
        <!--           fxLayoutAlign='start center'-->
        <!--           matTooltip='Comparar productos'-->
        <!--           routerLinkActive='router-link-active'>-->

        <!--          <mat-icon *ngIf='compareItems.length' [matBadge]='compareItems.length'-->
        <!--                    matBadgeColor='accent'>compare_arrows-->
        <!--          </mat-icon>-->

        <!--          <mat-icon *ngIf='!compareItems.length'>compare_arrows</mat-icon>-->
        <!--          <span fxHide fxShow='false'>{{ 'Comparar productos' | translate }}</span>-->
        <!--        </a>-->

        <a
          class="px-3 d-flex justify-content-start align-items-center"
          mat-button
          [matMenuTriggerFor]="currencyMenu"
          #currencyMenuTrigger="matMenuTrigger"
        >
          <span class="flag-menu-title">{{ currency?.name | translate }}</span>
          <mat-icon iconPositionEnd class="mat-icon-sm caret cur-icon">arrow_drop_down</mat-icon>
        </a>
        <mat-menu
          #currencyMenu="matMenu"
          [overlapTrigger]="false"
          xPosition="before"
          class="app-dropdown menu-currency"
        >
          <span>
            <span class="px-2 mt-1 title-mat-menu">{{ 'Currencies' | translate }}:</span>
            <button mat-menu-item *ngFor="let cur of currencies" (click)="changeCurrency(cur)">
              <span>&gt; {{ cur?.name | translate }}</span>
            </button>
          </span>
        </mat-menu>

        <!-- <a class="px-3" fxLayoutAlign="start center" mat-button [matMenuTriggerFor]="langMenu" #langMenuTrigger="matMenuTrigger">
          <img [src]="flag.image" width="18">
          <mat-icon class="mat-icon-sm caret cur-icon">arrow_drop_down</mat-icon>
        </a>
        <mat-menu #langMenu="matMenu" [overlapTrigger]="false" xPosition="before" class="app-dropdown">
          <span>
            <button mat-menu-item *ngFor="let flag of flags" (click)="changeLang(flag)">
              <img [src]="flag.image" width="18"> {{flag?.name}}
            </button>
          </span>
        </mat-menu> -->

        <!-- ================================ -->
        <!-- CART MENU -->
        <app-shopping-widgets class="button-web-currency"></app-shopping-widgets>

        <!-- ================================ -->
        <!-- NOTIFICATIONS -->
        <a
          *ngIf="loggedInUser"
          class="px-3 d-flex justify-content-start align-items-center"
          style="color: white"
        >
          <button (click)="notificationBar.toggle()" mat-icon-button>
            <mat-icon
              [matBadge]="notificationsService.getUnreadNotifications()"
              matBadgeColor="accent"
              >notifications
            </mat-icon>
          </button>
        </a>

        <!-- ================================ -->
        <!-- ACCOUNT MENU -->
        <a
          *ngIf="!loggedInUser"
          [routerLink]="['/my-account']"
          class="px-3 d-flex justify-content-start align-items-center d-inline"
          routerLinkActive="router-link-active"
        >
          <mat-icon>person</mat-icon>
          <span class="d-xs-none d-sm-none">{{ 'Account' | translate }}</span>
        </a>

        <a
          #userMenuTrigger="matMenuTrigger"
          *ngIf="loggedInUser"
          [matMenuTriggerFor]="userMenu"
          class="px-0 pl-2 d-flex justify-content-start align-items-center d-inline"
          mat-icon-button
        >
          <!--          <img *ngIf='!this.loggedInUser?.avatar' alt='Profile'-->
          <!--               class='profileImage' src='assets/images/avatars/profile2.png' />-->
          <mat-icon *ngIf="!this.loggedInUser?.avatar" alt="Profile"> account_circle </mat-icon>
          <img
            *ngIf="this.loggedInUser?.avatar"
            [src]="urlImage + loggedInUser?.avatar"
            alt="Profile"
            class="profileImage"
          />
        </a>

        <mat-menu
          #userMenu="matMenu"
          [overlapTrigger]="false"
          class="app-dropdown"
          xPosition="before"
        >
          <button *ngIf="this.loggedInUser" mat-menu-item>
            <strong>{{ this.loggedInUser.name }} {{ this.loggedInUser.lastName || '' }}</strong>
          </button>

          <button [routerLink]="['/my-orders']" mat-menu-item>
            <mat-icon>receipt</mat-icon>
            <span class="mat-body-1">{{ 'Mis órdenes' | translate }}</span>
          </button>

          <button
            [routerLink]="['/referred']"
            mat-menu-item
            *ngIf="appService.businessConfig?.giftRulesReferrer"
          >
            <mat-icon>person_add</mat-icon>
            <span class="mat-body-1">{{ 'Referidos' | translate }}</span>
          </button>

          <button (click)="onShowProfile()" mat-menu-item>
            <mat-icon>build</mat-icon>
            <span class="mat-body-1">{{ 'Profile' | translate }}</span>
          </button>

          <button (click)="onShowMyContacts()" mat-menu-item>
            <mat-icon>book</mat-icon>
            <span class="mat-body-1">{{ 'Mis contactos' | translate }}</span>
          </button>

          <button
            (click)="onGotoBackend()"
            *ngIf="
              loggedInUser &&
              (loggedInUserService.isAdminOrOwnerUser() || loggedInUserService.isMessengerUser())
            "
            mat-menu-item
          >
            <mat-icon>edit</mat-icon>
            <a id="linkNavBack" style="display: none"></a>
            <span class="mat-body-1">{{ 'Administración' | translate }}</span>
          </button>

          <button (click)="onChangePass()" *ngIf="loggedInUser" mat-menu-item>
            <mat-icon>settings</mat-icon>
            <span class="mat-body-1">{{ 'Cambie la contraseña' | translate }}</span>
          </button>

          <!-- ------------------------- -->
          <!-- NOTIFICATIONS -->
          <div
            (click)="createYourBusiness()"
            *ngIf="
              loggedInUser &&
              appService.businessConfig?.showDigitalContract &&
              !this.loggedInUser?.Business
            "
            mat-menu-item
          >
            <mat-icon>shopping_basket</mat-icon>
            <span class="mat-body-1">{{ 'Crea tu negocio' | translate }}</span>
          </div>
          <!--                    <a *ngIf="loggedInUser" mat-menu-item href="{{urlToCreateBusiness}}" target="_blank">-->
          <!--                      <mat-icon>shopping_basket</mat-icon>-->
          <!--                      <span class="mat-body-1">{{ 'Crea tu negocio' | translate }}</span>-->
          <!--                    </a>-->

          <button (click)="onLogout()" mat-menu-item>
            <mat-icon>exit_to_app</mat-icon>
            <span class="mat-body-1">{{ 'Logout' | translate }}</span>
          </button>
        </mat-menu>
      </div>
    </div>
  </div>

  <!--Home Header En vista movil -->
  <div class="home-header-2 p-2 d-sm-block d-none">
    <div class="d-flex flex-column justify-content-start align-items-stretch">
      <div class="d-flex justify-content-between align-items-center">
        <div class="main-logo-container d-flex justify-content-start align-items-center">
          <button (click)="start.toggle()" class="mr-2" mat-icon-button>
            <mat-icon>menu</mat-icon>
          </button>
          <img alt="logo" class="logo-img-main" routerLink="/" [src]="logo" />
        </div>

        <div class="userWidgets m-0 p-0 d-flex justify-content-start align-items-center">
          <a
            class="button-currency ml-3 d-flex justify-content-center align-items-center"
            mat-button
            [matMenuTriggerFor]="currencyMenu"
            #currencyMenuTrigger="matMenuTrigger"
          >
            <span class="flag-menu-title">{{ currency?.name | translate }}</span>
            <mat-icon iconPositionEnd class="mat-icon-sm caret cur-icon">arrow_drop_down</mat-icon>
          </a>
          <mat-menu
            #currencyMenu="matMenu"
            [overlapTrigger]="false"
            xPosition="before"
            class="app-dropdown"
          >
            <span>
              <button
                mat-menu-item
                *ngFor="let cur of currencies; let i = index"
                [disabled]="i === 0"
                (click)="changeCurrency(cur)"
              >
                <span>{{ cur?.name | translate }} {{ i }}</span>
              </button>
            </span>
          </mat-menu>

          <a
            *ngIf="!loggedInUser"
            [routerLink]="['/my-account']"
            routerLinkActive="router-link-active"
            class="d-flex justify-content-start align-items-center d-inline"
          >
            <mat-icon>person</mat-icon>
            <span class="d-xs-none d-sm-none">{{ 'Account' | translate }}</span>
          </a>

          <app-shopping-widgets></app-shopping-widgets>

          <a
            *ngIf="loggedInUser"
            style="color: white"
            class="d-flex justify-content-start align-items-center"
          >
            <button (click)="notificationBar.toggle()" mat-icon-button>
              <mat-icon
                [matBadge]="notificationsService.getUnreadNotifications()"
                matBadgeColor="accent"
                >notifications
              </mat-icon>
            </button>
          </a>
        </div>
      </div>

      <div class="d-flex justify-content-center align-items-start">
        <div class="mobile-search d-flex justify-content-start align-items-center">
          <input
            (keyup.enter)="onSearch()"
            [formControl]="searchForm"
            placeholder="{{ 'Buscar...' | translate }}"
            type="search"
            class="transpilerClass-fxFlex-fe6231"
          />
          <button (click)="onSearch()">
            <mat-icon>search</mat-icon>
          </button>
        </div>
      </div>

      <div
        class="showCategories d-flex d-xs-flex d-sm-flex justify-content-xs-start justify-content-sm-start align-items-xs-center align-items-sm-center d-md-flex justify-content-sm-center justify-content-md-center align-items-md-center"
      >
        <!--        <a [routerLink]="['']"-->
        <!--           [routerLinkActiveOptions]="{ exact: true }"-->
        <!--           routerLinkActive="router-link-active"-->
        <!--           class="itemCategory"-->
        <!--           mat-button>{{ 'Inicio' | translate }}</a>-->

        <a
          [routerLink]="['/shops-list']"
          *ngIf="appService.businessConfig?.canShowOurBussiness"
          class="itemCategory"
          mat-button
          routerLinkActive="router-link-active"
        >
          {{ 'Nuestras tiendas' | translate }}</a
        >
        <a
          [routerLink]="['/products/search']"
          class="itemCategory"
          mat-button
          routerLinkActive="router-link-active"
          *ngIf="appService.businessConfig?.showAllProducts"
        >
          {{ 'Todos los productos' | translate }}</a
        >

        <!--        routerLinkActive="router-link-active"-->
        <a
          *ngFor="let category of categories"
          [queryParams]="{ CategoryId: category.id }"
          [routerLink]="['/products/search']"
          class="itemCategory"
          mat-button
          >{{ category.name | parseLang: utilsService.getLang() }}</a
        >
      </div>
    </div>
  </div>
  <div
    (click)="openSetLocation()"
    class="mobile-location d-flex justify-content-start align-items-center transpilerClass-fxLayoutGap-f9d6f6 d-sm-block d-none"
  >
    <div class="nl-logo d-flex justify-content-center align-items-center">
      <mat-icon>room</mat-icon>
    </div>
    <div *ngIf="!business && !province">{{ 'Comprar en...' | translate }}</div>
    <div *ngIf="province && !business">{{ province?.name }}, {{ municipality?.name }}</div>
    <div *ngIf="business">{{ business?.name }}, {{ province?.name }}</div>
  </div>

  <div class="menu-container1">
    <!--    <app-menu [_categories]="categories"></app-menu>-->
    <app-menu></app-menu>
  </div>

  <router-outlet></router-outlet>

  <!--  <app-footer-two *ngIf="!url.includes('my-account')"></app-footer-two>-->
  <app-footer *ngIf="!url?.includes('my-account')"></app-footer>
</mat-sidenav-container>

<mat-sidenav-container
  fullscreen
  *ngIf="appService.businessConfig?.Business?.status === 'blockPayment'"
>
  <div [class.py-2]="!loggedInUser" class="home-header d-sm-none">
    <div class="container-header d-flex justify-content-between align-items-center">
      <img
        alt="logo"
        class="Logo-img d-inline d-sm-none"
        (click)="metaAdd()"
        routerLink="/"
        [src]="logo"
      />
    </div>
  </div>
  <!-- BANNER TEMPORAL -->
  <div
    style="
      padding: 16px;
      background-color: darkred;
      color: white !important;
      font-weight: bold;
      width: 91%;
      white-space: normal;
      max-width: 91% !important;
      margin: 0 auto;
    "
    class="mt-3"
  >
    <h1 style="color: white !important">
      Esta tienda online se encuentra mantenimiento, disculpe por las molestias ocasionadas
    </h1>
  </div>
  <!-- BANNER TEMPORAL -->
</mat-sidenav-container>
